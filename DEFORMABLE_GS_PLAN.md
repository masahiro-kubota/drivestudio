# Deformable-GS ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨ˆç”»

## ğŸ“‹ æ¦‚è¦

**ç›®çš„**: Deformable-GSã§Waymo scene 023ã®æœ€åˆã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’æˆåŠŸã•ã›ã‚‹

**ä½œæˆæ—¥**: 2026-02-14
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸš€ æº–å‚™å®Œäº†ã€å®Ÿè¡Œå¾…ã¡

---

## ğŸ¯ ãªãœDeformable-GSã‹

### OmniReã§ç™ºç”Ÿã—ãŸå•é¡Œ

1. âŒ **Sky Masksä¸è¶³**
   - SegFormerç’°å¢ƒï¼ˆPyTorch 1.8ï¼‰ã§ã®åˆ¥é€”å‡¦ç†ãŒå¿…è¦
   - æ™‚é–“ãŒã‹ã‹ã‚‹

2. âŒ **SMPLäººä½“ãƒãƒ¼ã‚ºä¸è¶³**
   - Google Driveã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã ãŒã€è¿½åŠ ã‚¹ãƒ†ãƒƒãƒ—ãŒå¿…è¦
   - ã‚³ãƒ¼ãƒ‰ãŒSMPLãƒ‡ãƒ¼ã‚¿å‰æã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹

3. âŒ **ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã®è¤‡é›‘ã•**
   - SMPLãªã—ã§å‹•ä½œã•ã›ã‚‹ã«ã¯å¤§å¹…ãªä¿®æ­£ãŒå¿…è¦

### Deformable-GSã®åˆ©ç‚¹

1. âœ… **ã‚·ãƒ³ãƒ—ãƒ«ãªå‰ææ¡ä»¶**
   - Sky masksä¸è¦
   - SMPLäººä½“ãƒãƒ¼ã‚ºä¸è¦
   - åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿ï¼ˆç”»åƒã€LiDARã€ãƒã‚¹ã‚¯ï¼‰ã®ã¿ã§å‹•ä½œ

2. âœ… **ç†è§£ã—ã‚„ã™ã„æ§‹é€ **
   - ã‚·ãƒ³ã‚°ãƒ«è¡¨ç¾ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼
   - ã‚·ãƒ¼ãƒ³å…¨ä½“ã‚’1ã¤ã®å¤‰å½¢å¯èƒ½Gaussianã§è¡¨ç¾

3. âœ… **æœ€åˆã®ãƒ†ã‚¹ãƒˆã«æœ€é©**
   - ç’°å¢ƒã®å‹•ä½œç¢ºèª
   - ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
   - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã®ç†è§£

---

## ğŸš€ å®Ÿè¡Œæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒç¢ºèª

```bash
# ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
source .venv/bin/activate

# ç’°å¢ƒå¤‰æ•°è¨­å®š
export PYTHONPATH=$(pwd)

# GPUç¢ºèª
python -c "import torch; print(f'CUDA available: {torch.cuda.is_available()}')"
```

### ã‚¹ãƒ†ãƒƒãƒ—2: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª

```bash
# Deformable-GSè¨­å®š
cat configs/deformablegs.yaml | head -50

# Waymo 3ã‚«ãƒ¡ãƒ©è¨­å®š
cat configs/datasets/waymo/3cams.yaml
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ

```bash
python tools/train.py \
    --config_file configs/deformablegs.yaml \
    --output_root ./logs/test_deformgs \
    --project first_test \
    --run_name scene_23_3cams \
    dataset=waymo/3cams \
    data.scene_idx=23 \
    data.start_timestep=0 \
    data.end_timestep=50 \
    data.pixel_source.load_sky_mask=false
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¬æ˜**:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å€¤ | èª¬æ˜ |
|-----------|-----|------|
| `--config_file` | `configs/deformablegs.yaml` | Deformable-GSè¨­å®š |
| `--output_root` | `./logs/test_deformgs` | ãƒ­ã‚°å‡ºåŠ›å…ˆ |
| `--project` | `first_test` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå |
| `--run_name` | `scene_23_3cams` | å®Ÿè¡Œå |
| `dataset` | `waymo/3cams` | 3ã‚«ãƒ¡ãƒ©æ§‹æˆ |
| `data.scene_idx` | `23` | ã‚·ãƒ¼ãƒ³023 |
| `data.start_timestep` | `0` | é–‹å§‹ãƒ•ãƒ¬ãƒ¼ãƒ  |
| `data.end_timestep` | `50` | çµ‚äº†ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆ51ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰ |
| `data.pixel_source.load_sky_mask` | `false` | Sky masksã‚’ä½¿ç”¨ã—ãªã„ |

### ã‚¹ãƒ†ãƒƒãƒ—4: é€²æ—ç›£è¦–

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: TensorBoard**
```bash
# åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
tensorboard --logdir ./logs/test_deformgs
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:6006 ã«ã‚¢ã‚¯ã‚»ã‚¹
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«**
```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ­ã‚°ã‚’ç¢ºèª
tail -f ./logs/test_deformgs/first_test/scene_23_3cams/logs.txt
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: å®šæœŸçš„ãªç¢ºèª**
```bash
# é€²æ—ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
watch -n 60 'ls -lh ./logs/test_deformgs/first_test/scene_23_3cams/checkpoints/'
```

### ã‚¹ãƒ†ãƒƒãƒ—5: çµæœç¢ºèª

```bash
# ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆç¢ºèª
ls -lh ./logs/test_deformgs/first_test/scene_23_3cams/checkpoints/

# ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœ
ls -lh ./logs/test_deformgs/first_test/scene_23_3cams/renderings/

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cat ./logs/test_deformgs/first_test/scene_23_3cams/config.yaml
```

### ã‚¹ãƒ†ãƒƒãƒ—6: è©•ä¾¡å®Ÿè¡Œ

```bash
# æœ€æ–°ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã§è©•ä¾¡
python tools/eval.py \
    --resume_from ./logs/test_deformgs/first_test/scene_23_3cams/checkpoints/latest.ckpt

# ã¾ãŸã¯ç‰¹å®šã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
python tools/eval.py \
    --resume_from ./logs/test_deformgs/first_test/scene_23_3cams/checkpoints/step_30000.ckpt
```

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹çµæœ

### ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é€²è¡Œ

**åˆæœŸæ®µéšï¼ˆ0-1,000ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰**:
- GaussianåˆæœŸåŒ–ï¼ˆLiDARãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ï¼‰
- Losså€¤ãŒæ€¥é€Ÿã«æ¸›å°‘
- å¤§ã¾ã‹ãªå½¢çŠ¶ãŒè¦‹ãˆå§‹ã‚ã‚‹

**ä¸­é–“æ®µéšï¼ˆ1,000-15,000ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰**:
- Gaussianã®åˆ†å‰²ãƒ»çµ±åˆ
- è©³ç´°ãŒå¾ã€…ã«æ”¹å–„
- Losså€¤ãŒå®‰å®šã—ã¦æ¸›å°‘

**æœ€çµ‚æ®µéšï¼ˆ15,000-30,000ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰**:
- ç´°éƒ¨ã®èª¿æ•´
- Losså€¤ãŒåæŸ
- é«˜å“è³ªãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

### æˆåŠŸã®æŒ‡æ¨™

**å¿…é ˆ**:
- âœ… ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå®Œäº†ï¼ˆ30,000ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãªãå®Ÿè¡Œ
- âœ… ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒä¿å­˜ã•ã‚Œã‚‹

**å“è³ª**:
- ğŸ“ˆ Losså€¤ãŒé †èª¿ã«æ¸›å°‘ï¼ˆRGB Loss < 0.1ï¼‰
- ğŸ“ˆ PSNR > 20dBï¼ˆç›®å®‰ï¼‰
- ğŸ“ˆ SSIM > 0.7ï¼ˆç›®å®‰ï¼‰

**è¦–è¦šçš„**:
- ğŸ–¼ï¸ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”»åƒãŒç”Ÿæˆã•ã‚Œã‚‹
- ğŸ–¼ï¸ è»Šä¸¡ã‚„å»ºç‰©ã®å½¢çŠ¶ãŒèªè­˜ã§ãã‚‹
- ğŸ–¼ï¸ è‰²ã¨ãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒå¦¥å½“

---

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: CUDA Out of Memory

**ç—‡çŠ¶**:
```
RuntimeError: CUDA out of memory
```

**å¯¾å‡¦æ³•ï¼ˆå„ªå…ˆåº¦é †ï¼‰**:

1. **ãƒ•ãƒ¬ãƒ¼ãƒ æ•°ã‚’æ¸›ã‚‰ã™**
```bash
data.end_timestep=30  # 50 â†’ 30ãƒ•ãƒ¬ãƒ¼ãƒ 
```

2. **ã‚«ãƒ¡ãƒ©æ•°ã‚’æ¸›ã‚‰ã™**
```bash
dataset=waymo/2cams  # 3ã‚«ãƒ¡ãƒ© â†’ 2ã‚«ãƒ¡ãƒ©
```

3. **è§£åƒåº¦ã‚’ä¸‹ã’ã‚‹**
```bash
data.pixel_source.downscale=2  # ã‚ˆã‚Šä½è§£åƒåº¦
```

4. **ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’èª¿æ•´**ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ãŒå¿…è¦ï¼‰

### å•é¡Œ2: ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**:
```
FileNotFoundError: ...
AttributeError: ...
```

**å¯¾å‡¦æ³•**:
1. ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ç¢ºèª
```bash
ls data/waymo/processed/training/023/
```

2. PYTHONPATHã®ç¢ºèª
```bash
echo $PYTHONPATH
```

3. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è©³ç´°ã«ç¢ºèª

### å•é¡Œ3: Losså€¤ãŒä¸‹ãŒã‚‰ãªã„

**ç—‡çŠ¶**:
- æ•°åƒã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµŒéã—ã¦ã‚‚Loss > 0.5
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœãŒæ”¹å–„ã—ãªã„

**å¯¾å‡¦æ³•**:
1. **å­¦ç¿’ç‡ã‚’ç¢ºèª**ï¼ˆãƒ­ã‚°ã‹ã‚‰ï¼‰
2. **Gaussianæ•°ã‚’ç¢ºèª**ï¼ˆå°‘ãªã™ãã‚‹/å¤šã™ãã‚‹ï¼‰
3. **åˆæœŸåŒ–ã‚’ç¢ºèª**ï¼ˆLiDARãƒã‚¤ãƒ³ãƒˆæ•°ï¼‰
4. **è¨­å®šã‚’è¦‹ç›´ã™**ï¼ˆåˆ¥ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è©¦ã™ï¼‰

### å•é¡Œ4: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒé€”ä¸­ã§åœæ­¢

**ç—‡çŠ¶**:
- ãƒ—ãƒ­ã‚»ã‚¹ãŒäºˆæœŸã›ãšçµ‚äº†
- ãƒ­ã‚°ãŒæ›´æ–°ã•ã‚Œãªã„

**å¯¾å‡¦æ³•**:
1. **GPUã®çŠ¶æ…‹ç¢ºèª**
```bash
nvidia-smi
```

2. **ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç¢ºèª**
```bash
df -h
```

3. **æœ€å¾Œã®ãƒ­ã‚°ã‚’ç¢ºèª**
```bash
tail -100 ./logs/test_deformgs/first_test/scene_23_3cams/logs.txt
```

4. **ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰å†é–‹**
```bash
python tools/train.py \
    --resume_from ./logs/test_deformgs/first_test/scene_23_3cams/checkpoints/latest.ckpt
```

---

## ğŸ“ˆ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæˆåŠŸå¾Œï¼‰

### çŸ­æœŸï¼ˆä»Šæ—¥ã€œæ˜æ—¥ï¼‰

1. **çµæœã‚’åˆ†æ**
   - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å“è³ªã‚’è©•ä¾¡
   - ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªï¼ˆPSNR, SSIM, LPIPSï¼‰
   - å•é¡Œç‚¹ã‚’ç‰¹å®š

2. **è¨­å®šã‚’æœ€é©åŒ–**
   - å¿…è¦ã«å¿œã˜ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
   - å†ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°

### ä¸­æœŸï¼ˆä»Šé€±ï¼‰

1. **ãƒ•ãƒ«ãƒ•ãƒ¬ãƒ¼ãƒ ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
```bash
data.start_timestep=0
data.end_timestep=-1  # å…¨ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆ199ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰
```

2. **5ã‚«ãƒ¡ãƒ©ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
```bash
dataset=waymo/5cams
```

3. **ä»–ã®ã‚·ãƒ¼ãƒ³ã§å®Ÿé¨“**
```bash
data.scene_idx=114  # ã‚·ãƒ¼ãƒ³114
data.scene_idx=327  # ã‚·ãƒ¼ãƒ³327
```

### é•·æœŸï¼ˆä»Šå¾Œï¼‰

1. **OmniReã®ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™**
   - Option A: SMPLäººä½“ãƒãƒ¼ã‚ºã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   ```bash
   cd data
   gdown 1QrtMrPAQhfSABpfgQWJZA2o_DDamL_7_
   unzip waymo_preprocess_humanpose.zip
   ```

   - Option B: Sky masksã‚’æŠ½å‡º
     - SegFormerç’°å¢ƒæ§‹ç¯‰
     - ãƒã‚¹ã‚¯æŠ½å‡ºå®Ÿè¡Œ

2. **OmniReã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
   - ãƒãƒ«ãƒè¡¨ç¾ã®åˆ©ç‚¹ã‚’æ´»ç”¨
   - ã‚ˆã‚Šé«˜å“è³ªãªçµæœã‚’ç›®æŒ‡ã™

3. **æ‰‹æ³•ã®æ¯”è¼ƒ**
   - Deformable-GS vs OmniRe
   - å®šé‡çš„ãƒ»å®šæ€§çš„è©•ä¾¡
   - è«–æ–‡çµæœã¨ã®æ¯”è¼ƒ

4. **æœ¬å®¶ã¸ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ**
   - gsplat 1.4.0å¯¾å¿œã®PRä½œæˆ
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ”¹å–„
   - Issueå ±å‘Š

---

## ğŸ“ è¨˜éŒ²ã™ã¹ãæƒ…å ±

### ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­

- [ ] é–‹å§‹æ™‚åˆ»
- [ ] GPUä½¿ç”¨ç‡ï¼ˆ`nvidia-smi`ï¼‰
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- [ ] æ¨å®šå®Œäº†æ™‚åˆ»

### ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å¾Œ

- [ ] å®Œäº†æ™‚åˆ»
- [ ] ç·æ‰€è¦æ™‚é–“
- [ ] æœ€çµ‚Losså€¤
- [ ] PSNR, SSIM, LPIPS
- [ ] ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚µã‚¤ã‚º
- [ ] å•é¡Œç‚¹ã¨æ”¹å–„ç‚¹

### ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

- [ ] TensorBoardã®Lossã‚°ãƒ©ãƒ•
- [ ] ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœï¼ˆæ•°æšï¼‰
- [ ] Ground truthã¨ã®æ¯”è¼ƒ

---

## ğŸ“ å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

### Deformable-GSã«ã¤ã„ã¦

- **è«–æ–‡**: [Deformable 3D Gaussians for High-Fidelity Monocular Dynamic Scene Reconstruction](https://arxiv.org/abs/2309.13101)
- **ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**: å„Gaussianã«å¤‰å½¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã€å‹•çš„ã‚·ãƒ¼ãƒ³ã‚’è¡¨ç¾

### 3D Gaussian Splattingã®åŸºç¤

- **åŸè«–æ–‡**: [3D Gaussian Splatting for Real-Time Radiance Field Rendering](https://arxiv.org/abs/2308.04079)
- **gsplat**: [GitHub - nerfstudio-project/gsplat](https://github.com/nerfstudio-project/gsplat)

### Waymo Open Dataset

- **å…¬å¼ã‚µã‚¤ãƒˆ**: [Waymo Open Dataset](https://waymo.com/open/)
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [Waymo Dataset Format](https://github.com/waymo-research/waymo-open-dataset)

---

**æœ€çµ‚æ›´æ–°**: 2026-02-14 19:45
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ
